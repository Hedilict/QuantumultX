## å‰è¨€

æ–‡ä»¶åœ°å€ï¼šhttps://github.com/sazs34/TaskConfig/blob/master/task/weather_pro.js

**æ­¤è„šæœ¬å·²å…¼å®¹Surgeå’ŒQuantumultX**

ä¸ºäº†æ»¡è¶³å¤šå…ƒåŒ–çš„å¤©æ°”ä¿¡æ¯æŸ¥è¯¢(å…¶å®å°±æ˜¯å¼€å‘è€…æƒ³å†™ç€ç©è€Œå·²)

æä¾›äº†å¿«æ·åœ°å¤©æ°”ä¿¡æ¯æŸ¥è¯¢æ”¯æŒ

èƒ½å¤Ÿå¿«é€Ÿåœ°æŸ¥çœ‹`å½“å¤©å¤©æ°”` `7å¤©å¤©æ°”` `48å°æ—¶é€å°æ—¶å¤©æ°”`

æ‚¨å¯ä»¥è‡ªç”±åœ°è¿›è¡Œé…ç½®,æ··æ­,æƒ³æ€æ ·å°±æ€æ ·

*ç„¶åè¿™ä¸ªä»…é™æœ‰è€å¿ƒçœ‹å®Œæ–‡æ¡£çš„äººè¿›è¡Œé…ç½®*

å¦‚æœæ‚¨æ²¡æœ‰è€å¿ƒçœ‹å®Œæ–‡æ¡£ï¼Œæ–‡ä»¶æœ¬èº«ä¹Ÿæä¾›äº†é»˜è®¤çš„æ¨¡æ¿åœ¨ï¼Œç”¨äºæ¯æ—¥å¤©æ°”çš„æ˜¾ç¤º

**ä¸æä¾›ä»»ä½•æŠ€æœ¯æ”¯æŒï¼Œä»…ä¸ªäººä½¿ç”¨åˆ†äº«å‡ºæ¥è€Œå·²**

**ä¸æä¾›ä»»ä½•æŠ€æœ¯æ”¯æŒï¼Œä»…ä¸ªäººä½¿ç”¨åˆ†äº«å‡ºæ¥è€Œå·²**

**ä¸æä¾›ä»»ä½•æŠ€æœ¯æ”¯æŒï¼Œä»…ä¸ªäººä½¿ç”¨åˆ†äº«å‡ºæ¥è€Œå·²**

## è¯´æ˜

è¿™ä¸ªå°±ç›¸å½“äºä¸€ä¸ªå ä½ç¬¦

æ¯”å¦‚æˆ‘è¦æ˜¾ç¤ºçš„å†…å®¹æ˜¯`åŒ—äº¬ æ™´ --@wechatu`

åˆ™è¿™é‡Œé¢åŒ…å«äº†`åŸå¸‚åç§°` `å¤©æ°”æè¿°` `diyä»»æ„æ–‡å­—`

æ ¹æ®æ–‡æ¡£æœ€åé¢çš„æ¨¡æ¿é…ç½®ä¿¡æ¯æ¥çœ‹ï¼Œè¿™é‡Œé¢å…¨éƒ½æ˜¯ç”¨çš„æ™®é€šæ¨¡æ¿

åˆ™æˆ‘çš„æ¨¡æ¿å°±è¦å†™æˆ

```
$[city] $[weather] --@wechatu
```

### é…ç½®é¡¹ä½ç½®

ä½äºé…ç½®ä¸­`congfig - show -template`

```javascript
let config = {
    darksky_api: "å¡«è¿™é‡Œ", //ä»https://darksky.net/dev/ ä¸Šç”³è¯·keyå¡«å…¥å³å¯
    aqicn_api: "å¡«è¿™é‡Œ", //ä»http://aqicn.org/data-platform/token/#/ ä¸Šç”³è¯·keyå¡«å…¥å³å¯
    huweather_apiKey: "å¡«è¿™é‡Œ", //å’Œé£å¤©æ°”APIkey,å¯è‡ªè¡Œå‰å¾€ https://dev.heweather.com/ è¿›è¡Œè·å–,è®°å¾—keyç±»å‹é€‰æ‹©WebApi
    lat_lon: "ç»çº¬åº¦å¡«è¿™é‡Œ", //è¯·å¡«å†™ç»çº¬åº¦,ç›´æ¥ä»è°·æ­Œåœ°å›¾ä¸­è·å–å³å¯
    lang: "zh", //è¯­è¨€,éšæ„åˆ‡æ¢ä¸ºæ‚¨æƒ³è¦çš„è¯­è¨€å“¦(zh/zh-tw/ja/en/fr/...)
    log: 2, //è°ƒè¯•æ—¥å¿—,0ä¸ºä¸å¼€å¯,1ä¸ºå¼€å¯,2ä¸ºå¼€å¯ç²¾ç®€æ—¥å¿—
    timeout: 0, //è¶…æ—¶æ—¶é—´,å•ä½æ¯«ç§’(1000æ¯«ç§’=1ç§’),ä¸€èˆ¬ä¸æ¨èä¿®æ”¹[ä¸º0åˆ™ä¸é™åˆ¶è¶…æ—¶æ—¶é—´]
    show: {
        //(ã€ƒ'â–½'ã€ƒ)å°±æ˜¯è¿™é‡Œå°±æ˜¯è¿™é‡Œï¼Œå°±åœ¨è¿™é‡Œå¡«æ¨¡æ¿çš„
        template: {
            title: `$[city]$[district] $[summary]`,
            subtitle: `$[weatherIcon]$[weather] $[temperatureMin] ~ $[temperatureMax]Â°C â˜”ï¸é™é›¨æ¦‚ç‡ $[precipProbability]%`,
            detail: `ğŸ¥µç©ºæ°”è´¨é‡ $[aqi]($[aqiDesc]) ğŸŒ¬é£é€Ÿ$[windSpeed]km/h $[windDir]
ğŸ‘€ç´«å¤–çº¿æŒ‡æ•° $[uv]($[uvDesc]) ğŸ’¦æ¹¿åº¦$[currentHumidity]%
ğŸŒ¡ä½“æ„Ÿæ¸©åº¦ $[apparentTemperatureMin] ~ $[apparentTemperatureMax]Â°C ğŸ‹ğŸ»â€â™€ï¸æ°”å‹$[atmosphere]pa
$[lifeStyle($[icon][$[brf]]$[txt])]`
        },
        lifestyle: { //æ­¤å¤„ç”¨äºæ˜¾ç¤ºå„é¡¹ç”Ÿæ´»æŒ‡æ•°ï¼Œå¯è‡ªè¡Œè°ƒæ•´é¡ºåºï¼Œé¡ºåºè¶Šåœ¨å‰é¢åˆ™æ˜¾ç¤ºä¹Ÿä¼šé å‰ï¼Œå¦‚æœæ‚¨ä¸æƒ³æŸ¥çœ‹æŸä¸€æŒ‡æ•°ï¼Œç½®ä¸ºfalseå³å¯ï¼Œæƒ³çœ‹ç½®ä¸ºtrueå³å¯
            drsg: true, //ç©¿è¡£æŒ‡æ•°,
            flu: true, //æ„Ÿå†’æŒ‡æ•°,
            comf: true, //èˆ’é€‚åº¦æŒ‡æ•°,
            cw: false, //æ´—è½¦æŒ‡æ•°,
            sport: false, //è¿åŠ¨æŒ‡æ•°,
            trav: false, //æ—…æ¸¸æŒ‡æ•°,
            uv: false, //ç´«å¤–çº¿æŒ‡æ•°,
            air: false, //ç©ºæ°”æ±¡æŸ“æ‰©æ•£æ¡ä»¶æŒ‡æ•°,
            ac: false, //ç©ºè°ƒå¼€å¯æŒ‡æ•°,
            ag: false, //è¿‡æ•æŒ‡æ•°,
            gl: false, //å¤ªé˜³é•œæŒ‡æ•°,
            mu: false, //åŒ–å¦†æŒ‡æ•°,
            airc: false, //æ™¾æ™’æŒ‡æ•°,
            ptfc: false, //äº¤é€šæŒ‡æ•°,
            fsh: false, //é’“é±¼æŒ‡æ•°,
            spi: false, //é˜²æ™’æŒ‡æ•°
        }
    }
}
```



## ç¤ºä¾‹

### æ¯æ—¥å¤©æ°”æŸ¥çœ‹

![image-20200107183838878](assets/image-20200107183838878.png)

#### å¯¹åº”æ¨¡æ¿

```javascript
template: {
            title: `$[city]$[district] $[summary]`,
            subtitle: `$[weatherIcon]$[weather] $[temperatureMin] ~ $[temperatureMax]Â°C â˜”ï¸é™é›¨æ¦‚ç‡ $[precipProbability]%`,
            detail: `ğŸ¥µç©ºæ°”è´¨é‡ $[aqi]($[aqiDesc]) ğŸŒ¬é£é€Ÿ$[windSpeed]km/h $[windDir]
ğŸ‘€ç´«å¤–çº¿æŒ‡æ•° $[uv]($[uvDesc]) ğŸ’¦æ¹¿åº¦$[currentHumidity]%
ğŸŒ¡ä½“æ„Ÿæ¸©åº¦ $[apparentTemperatureMin] ~ $[apparentTemperatureMax]Â°C ğŸ‹ğŸ»â€â™€ï¸æ°”å‹$[atmosphere]pa
$[lifeStyle([$[brf]]$[txt])]`
        }
```

### ä¸€å‘¨å¤©æ°”æŸ¥çœ‹

<img src="assets/image-20200108093853445.png" alt="image-20200108093853445" style="zoom:67%;" />

#### å¯¹åº”æ¨¡æ¿

```javascript
template: {
            title: `$[city]$[district] $[weeklySummary]`,
            subtitle: ``,
            detail: `$[daily($[month]æœˆ$[day]æ—¥  $[temperatureLow]~$[temperatureHigh]Â°C  $[weatherIcon]$[weather])]`
        }
```



### 48å°æ—¶å¤©æ°”æŸ¥çœ‹

<img src="assets/image-20200108093902427.png" alt="image-20200108093902427" style="zoom:50%;" />

#### å¯¹åº”æ¨¡æ¿

```javascript
template: {
            title: `$[city]$[district] $[weeklySummary]`,
            subtitle: ``,
            detail: `$[hourly($[month]/$[day] $[hour]:00 $[temperature]Â°C  $[weatherIcon]$[weather] æ¹¿åº¦$[humidity]%)]`
        }
```

### æ··æ­

<img src="assets/image-20200108093910463.png" alt="image-20200108093910463" style="zoom:50%;" />

#### å¯¹åº”æ¨¡æ¿

```
template: {
            title: `$[city]$[district] $[summary]`,
            subtitle: `$[weatherIcon]$[weather] $[temperatureMin] ~ $[temperatureMax]Â°C â˜”ï¸é™é›¨æ¦‚ç‡ $[precipProbability]%`,
            detail: `ğŸ¥µç©ºæ°”è´¨é‡ $[aqi]($[aqiDesc]) ğŸŒ¬é£é€Ÿ$[windSpeed]km/h $[windDir]
ğŸ‘€ç´«å¤–çº¿æŒ‡æ•° $[uv]($[uvDesc]) ğŸ’¦æ¹¿åº¦$[currentHumidity]%
ğŸŒ¡ä½“æ„Ÿæ¸©åº¦ $[apparentTemperatureMin] ~ $[apparentTemperatureMax]Â°C ğŸ‹ğŸ»â€â™€ï¸æ°”å‹$[atmosphere]pa
        
$[hourly($[month]/$[day] $[hour]:00 ç´«å¤–çº¿æŒ‡æ•°$[uvIndex]($[uvDesc]) $[temperature]Â°C $[weatherIcon]$[weather])]`
        }
```



## API KEYç”³è¯·

ä½¿ç”¨æ­¤è„šæœ¬éœ€è¦ç”³è¯·key

- [Dark Sky API](https://darksky.net/dev)
- [Aqicn API](http://aqicn.org/data-platform/token/#/)
- [å’Œé£å¤©æ°”API](https://dev.heweather.com/) (æ³¨æ„ç”Ÿæˆkeyç±»å‹é€‰æ‹© WebApi)

## å¯é…ç½®çš„é€‰é¡¹

### æ™®é€šæ¨¡æ¿

å¯ä»¥ç›´æ¥è°ƒç”¨ï¼Œ

|          é…ç½®é¡¹           |         åŠŸèƒ½         | å•ä½ |      ç¤ºä¾‹å€¼      |
| :-----------------------: | :------------------: | :--: | :--------------: |
|        $[province]        |          çœ          |      |       æ±Ÿè‹       |
|          $[city]          |          å¸‚          |      |       è‹å·       |
|        $[district]        |          åŒº          |      |     å·¥ä¸šå›­åŒº     |
|        $[summary]         |   å…¨å¤©æ°”å€™å˜åŒ–æ¦‚è¿°   |      | æ™´æœ—å°†æŒç»­ä¸€æ•´å¤© |
|     $[weeklySummary]      |   ä¸€å‘¨æ°”å€™å˜åŒ–æ¦‚è¿°   |      |  é™é›¨æŒç»­ä¸€æ•´å‘¨  |
|      $[weatherIcon]       |       å¤©æ°”å›¾æ ‡       |      |        â˜€ï¸         |
|        $[weather]         | å¤©æ°”æè¿°(æ™´/é›¨/é›ªç­‰) |      |     æ™´è½¬å¤šäº‘     |
|   $[currentTemperature]   |       å½“å‰æ¸©åº¦       |  â„ƒ   |        22        |
|     $[temperatureMin]     |       æ¸©åº¦ä½å€¼       |  â„ƒ   |        13        |
|     $[temperatureMax]     |       æ¸©åº¦é«˜å€¼       |  â„ƒ   |        26        |
| $[apparentTemperatureMin] |     ä½“æ„Ÿæ¸©åº¦ä½å€¼     |  â„ƒ   |        15        |
| $[apparentTemperatureMax] |     ä½“æ„Ÿæ¸©åº¦é«˜å€¼     |  â„ƒ   |        23        |
|   $[precipProbability]    |       é™é›¨æ¦‚ç‡       |  %   |        90        |
|          $[aqi]           |       ç©ºæ°”è´¨é‡       |      |        45        |
|        $[aqiIcon]         |     ç©ºæ°”è´¨é‡å›¾æ ‡     |      |        ğŸŸ¢         |
|        $[aqiDesc]         |     ç©ºæ°”è´¨é‡æè¿°     |      |        ä¼˜        |
|       $[windSpeed]        |       å…¨å¤©é£é€Ÿ       | km/h |        15        |
|    $[currentWindSpeed]    |       å½“å‰é£é€Ÿ       | km/h |        13        |
|        $[windDir]         |       å…¨å¤©é£å‘       |      |      è¥¿åŒ—é£      |
|     $[currentWindDir]     |       å½“å‰é£å‘       |      |      ä¸œå—é£      |
|       $[windPower]        |     å…¨å¤©é£åŠ›ç­‰çº§     |      |       3-4        |
|    $[currentWindPower]    |     å½“å‰é£åŠ›ç­‰çº§     |      |       3-4        |
|        $[humidity]        |     å…¨å¤©ç›¸å¯¹æ¹¿åº¦     |  %   |        30        |
|    $[currentHumidity]     |     å½“å‰ç›¸å¯¹æ¹¿åº¦     |  %   |        30        |
|       $[atmosphere]       |      å…¨å¤©å¤§æ°”å‹      |  Pa  |       1030       |
|   $[currentAtmosphere]    |      å½“å‰å¤§æ°”å‹      |  Pa  |       1030       |
|       $[visibility]       |      å…¨å¤©èƒ½è§åº¦      |  km  |        10        |
|   $[currentVisibility]    |      å½“å‰èƒ½è§åº¦      |  km  |        10        |
|           $[uv]           |      ç´«å¤–çº¿æŒ‡æ•°      |      |        3         |
|         $[uvDesc]         |      ç´«å¤–çº¿æè¿°      |      |    äºŒçº§-è¾ƒå¼º     |
|        $[sunrise]         |       æ—¥å‡ºæ—¶é—´       |      |      07:36       |
|         $[sunset]         |       æ—¥è½æ—¶é—´       |      |      16:58       |
|        $[moonrise]        |       æœˆå‡ºæ—¶é—´       |      |      04:47       |
|        $[moonset]         |       æœˆè½æ—¶é—´       |      |      14:59       |
|       $[lifeStyle]        |       ç”Ÿæ´»æŒ‡æ•°       |      |       ...        |
|                           |                      |      |                  |
|           more            |   æ›´å¤šå†…å®¹ç­‰å¾…æ›´æ–°   |      |                  |

### åˆ—è¡¨æ¨¡æ¿

> ç”¨äºå¤šå¤©/é€å°æ—¶å¤©æ°”çš„æ¸²æŸ“
>
> å¯ä»¥åŒä¸Šé¢çš„æ™®é€šæ¨¡æ¿åŒæ—¶ä½¿ç”¨

#### é€å°æ—¶å¤©æ°”(48å°æ—¶)

##### ä½¿ç”¨è§„åˆ™

$[hourly(`æ­¤å¤„å¡«å…¥é…ç½®`)]

*éœ€è¦æ³¨æ„å“¦*

*å¤–é¢çš„é‚£ä¸ª$[hourly()]æ˜¯å¿…é¡»è¦çš„ï¼Œç„¶ååœ¨æ‹¬å·é‡Œé¢å¡«å…¥é…ç½®é¡¹ï¼Œç”¨äºåˆ—è¡¨æ¸²æŸ“*

```
ä¾‹å¦‚æˆ‘æ¯å°æ—¶æƒ³è¦æ˜¾ç¤ºçš„å†…å®¹æ˜¯
12ç‚¹ â˜€ï¸æ™´ æ¸©åº¦12â„ƒ
13ç‚¹ â˜€ï¸æ™´ æ¸©åº¦13â„ƒ
åˆ™æ¨¡æ¿å¡«å…¥çš„å†…å®¹æ˜¯
$[hourly($[hour]ç‚¹ $[weatherIcon]$[weather] æ¸©åº¦$[temperature]â„ƒ)]
å¤–é¢$[hourly()]æ˜¯å›ºå®šçš„éƒ¨åˆ†,ä»…åœ¨æ‹¬å·å†…å¡«å…¥é…ç½®
```

##### é…ç½®é¡¹

|         é…ç½®é¡¹         |          åŠŸèƒ½           | å•ä½ |   ç¤ºä¾‹    |
| :--------------------: | :---------------------: | :--: | :-------: |
|  $[month]  |   æœˆä»½   |  æœˆ  |       10       |
|   $[day]   |   æ—¥æœŸ   |  æ—¥  |       05       |
|        $[hour]         |          å°æ—¶           |      |    12     |
|       $[summary]       |          æ¦‚è¿°           |      | å¤šäº‘è½¬é˜´  |
|     $[weatherIcon]     |        å¤©æ°”å›¾æ ‡         |      |     â˜€ï¸     |
|       $[weather]       |  å¤©æ°”æè¿°(æ™´/é›¨/é›ªç­‰)   |      | æ™´è½¬å¤šäº‘  |
|     $[temperature]     |          æ¸©åº¦           |  â„ƒ   |    12     |
| $[apparentTemperature] |        ä½“æ„Ÿæ¸©åº¦         |  â„ƒ   |    10     |
|      $[humidity]       |          æ¹¿åº¦           |  $   |    30     |
|      $[windSpeed]      |          é£é€Ÿ           | km/h |     5     |
|     $[visibility]      |         èƒ½è§åº¦          |  km  |    16     |
|       $[uvIndex]       |       ç´«å¤–çº¿æŒ‡æ•°        |      |     5     |
|       $[uvDesc]        |       ç´«å¤–çº¿æè¿°        |      | ä¸€çº§-æœ€å¼± |
|     $[cloudCover]      | è¢«äº‘é®æŒ¡çš„å¤©ç©ºæ¯”ä¾‹(0~1) |  %   |    91     |

#### å¤šå¤©å¤©æ°”(7å¤©)

$[daily(`æ­¤å¤„å¡«å…¥é…ç½®`)]

|   é…ç½®é¡¹   |   åŠŸèƒ½   | å•ä½ |      ç¤ºä¾‹      |
| :--------: | :------: | :--: | :------------: |
|  $[month]  |   æœˆä»½   |  æœˆ  |       10       |
|   $[day]   |   æ—¥æœŸ   |  æ—¥  |       05       |
| $[summary] | å¤©æ°”æ¦‚è¿° |      | å°é›¨æŒç»­è‡³ä¸‹åˆ |
|     $[weatherIcon]     |        å¤©æ°”å›¾æ ‡         |      |     â˜€ï¸     |
|       $[weather]       |  å¤©æ°”æè¿°(æ™´/é›¨/é›ªç­‰)   |      | æ™´è½¬å¤šäº‘  |
| $[temperatureHigh] | æ¸©åº¦é«˜å€¼ | â„ƒ | 20 |
| $[temperatureLow] | æ¸©åº¦ä½å€¼ | â„ƒ | 13 |
| $[apparentTemperatureMax] | ä½“æ„Ÿæ¸©åº¦é«˜å€¼ | â„ƒ | 18 |
| $[apparentTemperatureMin] | ä½“æ„Ÿæ¸©åº¦ä½å€¼ | â„ƒ | 14 |
|      $[humidity]       |          æ¹¿åº¦           |  $   |    30     |
|      $[windSpeed]      |          é£é€Ÿ           | km/h |     5     |
|     $[visibility]      |         èƒ½è§åº¦          |  km  |    16     |
|       $[uvIndex]       |       ç´«å¤–çº¿æŒ‡æ•°        |      |     5     |
|       $[uvDesc]        |       ç´«å¤–çº¿æè¿°        |      | ä¸€çº§-æœ€å¼± |
|     $[cloudCover]      | è¢«äº‘é®æŒ¡çš„å¤©ç©ºæ¯”ä¾‹(0~1) |  %   |    91     |
|            |          |      |                |

#### ç”Ÿæ´»æŒ‡æ•°

$[lifeStyle(`æ­¤å¤„å¡«å…¥é…ç½®`)]

| é…ç½®é¡¹  |   åŠŸèƒ½   | å•ä½ |        ç¤ºä¾‹         |
| :-----: | :------: | :--: | :-----------------: |
| $[icon] |   å›¾æ ‡   |      |          ğŸ¤§          |
| $[type] | æŒ‡æ•°åç§° |      |      æ„Ÿå†’æŒ‡æ•°       |
| $[brf]  |   æ¦‚è¿°   |      |       è¾ƒæ˜“å‘        |
| $[txt]  | å…·ä½“æè¿° |      | å¯’å†·æ½®æ¹¿,æ˜“å‘ç”Ÿæ„Ÿå†’ |